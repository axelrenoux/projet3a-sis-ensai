<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.prime.com.tr/ui">



<ui:composition template="/modeleFormulaire.xhtml">
	<ui:define name="title">Votre recherche</ui:define>
	<ui:define name="contenu">
	
	<h:form>
	
	<h:outputLabel
					style="font-size: 16; text-align:center; font-family: Segoe UI, Helvetica, Arial, sans-serif;"> 
							Affinez vos critères et visualiser vos résultats ou 
	</h:outputLabel>
	
	
	<p:commandLink action="retourDebut" style="color:#ab5ddd; margin-right:20px;" ajax="false">  
        <h:outputText style="font-size: 16; text-align:center; font-family: Segoe UI, Helvetica, Arial, sans-serif;"
        value="faites une nouvelle recherche" />  
   </p:commandLink>


	<p:commandButton value="Nouvelle recherche"
									image="ui-icon ui-icon-circle-arrow-w" 
									action="retourDebut" ajax="false"/>
									
									
									
	</h:form>						
	
		
		<p:panel id="monPanel" style="width:1225px;">


			<center>
				<h:outputLabel
					rendered="#{vueAffichageResultat.etape1}"
					style="font-size: 20; text-align:center; font-family: Segoe UI, Helvetica, Arial, sans-serif;"> 
							Choisissez le type de recherche que vous  souhaitez faire, et affinez vos critères
				</h:outputLabel>
			</center>
			
			<center>
				<h:outputLabel
					rendered="#{vueAffichageResultat.etape2}"
					style="font-size: 20; text-align:center; font-family: Segoe UI, Helvetica, Arial, sans-serif;"> 
							Choisissez un second critère pour affiner votre recherche
				</h:outputLabel>
			</center>
			
			
			
				

<!-- affichage de l'étape 1 -->

			<h:panelGrid columns="5" 
				columnClasses="column">
				
			
				
				<h:form>
					 

<!-- etape1 album-->					
					<p:panel style="width:'#{vueAffichageResultat.largeurSousPanels}';height:600px;"
							rendered="#{vueAffichageResultat.etape1}">
						<p:messages showDetail="true" rendered="#{vueAffichageResultat.selectionAlbum1NonValide}"/>
						<p:dataTable var="cluster"
							value="#{vueAffichageResultat.lazyModelAlbums1}"
							selection="#{vueAffichageResultat.clusterAlbumNiveau1Choisi}"
							selectionMode="single" 
							style="width:'#{vueAffichageResultat.largeurDataTables1}';"
							paginator="true" 
							rows="10" 
							lazy="true"  
							paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"  
							rowsPerPageTemplate="5,10,15"  
							>
							
							<f:facet name="header">
								<h:outputLabel style="font-size: 18;">
						 			Trouver un album
						 		</h:outputLabel>
							</f:facet>
							

							<p:column>
								<f:facet name="header">  
			                  	Name
					          	</f:facet>
								<h:outputText value="#{cluster.nomCluster}" />
							</p:column>
							
							
							

							<f:facet name="footer">
								<p:commandButton value="Continuer"
									image="ui-icon ui-icon-circle-arrow-e" update="monPanel"
									action="#{vueAffichageResultat.affinerRechercheAlbum1}" />
							</f:facet>
							
						</p:dataTable>
						
						
					


					</p:panel>
				</h:form>

<!-- etape1 artiste-->
				<h:form>
					 
							
					<p:panel style="width:'#{vueAffichageResultat.largeurSousPanels}';height:600px;"
								rendered="#{vueAffichageResultat.etape1}">
						
						<p:messages showDetail="true" rendered="#{vueAffichageResultat.selectionArtiste1NonValide}"/>
						<p:dataTable var="cluster"
							value="#{vueAffichageResultat.lazyModelArtistes1}"
							selection="#{vueAffichageResultat.clusterArtisteNiveau1Choisi}"
							selectionMode="single" 
							style="width:'#{vueAffichageResultat.largeurDataTables1}';"
							paginator="true" 
							rows="10" 
							lazy="true"  
							paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"  
							rowsPerPageTemplate="5,10,15"  
							>   

						
							
							<f:facet name="header">
								<h:outputLabel style="font-size: 18;">
					 			Trouver un artiste
					 			</h:outputLabel>
							</f:facet>
							
							<p:column>
								<f:facet name="header">  
		                  			Name
				          		</f:facet>
								<h:outputText value="#{cluster.nomCluster}" />
							</p:column>
							
							
								

							<f:facet name="footer">
								<p:commandButton value="Continuer"
									image="ui-icon ui-icon-circle-arrow-e" update="monPanel"
									action="#{vueAffichageResultat.affinerRechercheArtiste1}" />
							</f:facet>
							
							
						</p:dataTable>
					</p:panel>
				</h:form>
				
<!-- etape1 chanson-->	
				<h:form>
					<p:panel style="width:'#{vueAffichageResultat.largeurSousPanels}';height:600px;"
							rendered="#{vueAffichageResultat.etape1}">
						<p:messages showDetail="true" rendered="#{vueAffichageResultat.selectionChanson1NonValide}"/>
						<p:dataTable var="cluster"
							value="#{vueAffichageResultat.lazyModelChansons1}"
							selection="#{vueAffichageResultat.clusterChansonNiveau1Choisi}"
							selectionMode="single" 
							style="width:'#{vueAffichageResultat.largeurDataTables1}';"
							paginator="true" 
							rows="10" 
							lazy="true"  
							paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"  
							rowsPerPageTemplate="5,10,15"  
							>   

							<f:facet name="header">
								<h:outputLabel style="font-size: 18;">
									Trouver une chanson 
								</h:outputLabel>
							</f:facet>

							<p:column>
								<f:facet name="header">  
		                  			Name
				          		</f:facet>
								<h:outputText value="#{cluster.nomCluster}" />
							</p:column>	
							
							<f:facet name="footer">
								<p:commandButton value="Continuer"
									image="ui-icon ui-icon-circle-arrow-e" update="monPanel"
									action="#{vueAffichageResultat.affinerRechercheChanson1}" />
							</f:facet>

						</p:dataTable>
					</p:panel>

				</h:form>
						

			</h:panelGrid>
			
<!-- affichage de l'étape 2 -->
			
			<table>
				<tr>
					<td width="100%">
						<center>
							<h:outputLabel rendered="#{vueAffichageResultat.etape2album}"
									style="font-size: 20; text-align:center; font-family: Segoe UI, Helvetica, Arial, sans-serif;"> 
											Vous recherche un album, 1er critère : #{vueAffichageResultat.clusterAlbumNiveau1Choisi.nomCluster}		
							</h:outputLabel>
						</center>
						
						<center>
							<h:outputLabel rendered="#{vueAffichageResultat.etape2artiste}"
									style="font-size: 20; text-align:center; font-family: Segoe UI, Helvetica, Arial, sans-serif;"> 
											Vous recherche un artiste, 1er critère : #{vueAffichageResultat.clusterArtisteNiveau1Choisi.nomCluster}		
							</h:outputLabel>
						</center>
						
						<center>
							<h:outputLabel rendered="#{vueAffichageResultat.etape2chanson}"
									style="font-size: 20; text-align:center; font-family: Segoe UI, Helvetica, Arial, sans-serif;"> 
											Vous recherche une chanson, 1er critère : #{vueAffichageResultat.clusterChansonNiveau1Choisi.nomCluster}		
							</h:outputLabel>
						</center>
						
						
						<h:form>
							
							<p:panel style="width:'#{vueAffichageResultat.largeurSousPanelSeul}';height:600px;"
								rendered="#{!vueAffichageResultat.etape1}">
<!-- etape2 album -->
								<center>
								<p:messages showDetail="true" rendered="#{vueAffichageResultat.selectionAlbum2NonValide}"/>
								<p:dataTable var="cluster"
									value="#{vueAffichageResultat.lazyModelAlbums2}"
									selection="#{vueAffichageResultat.clusterAlbumNiveau2Choisi}"
									selectionMode="single"
									rendered="#{vueAffichageResultat.etape2album}"
									style="width:'#{vueAffichageResultat.largeurDataTables2_3}';"
									paginator="true" 
									rows="10" 
									lazy="true"  
									paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"  
									rowsPerPageTemplate="5,10,15"  
									>
									
									 <f:facet name="header">
										<h:outputLabel style="font-size: 18;">
							 			Trouver un album
							 			</h:outputLabel>
									</f:facet>
									
									
									<p:column>
										<f:facet name="header">  
				                  			Name
						          		</f:facet>
										<h:outputText value="#{cluster.nomCluster}" />
									</p:column>
		
									
									<f:facet name="footer">
										
										<p:commandButton value="Retour"
													image="ui-icon ui-icon-circle-arrow-w" update="monPanel"
													action="#{vueAffichageResultat.retourEtape1}" />
										<p:commandButton value="Trouver"
											image="ui-icon ui-icon-search" update="monPanel"
											action="#{vueAffichageResultat.affinerRechercheAlbum2}" />
										
									</f:facet>
									
								</p:dataTable>
								</center>
						
<!-- etape 2 artiste -->
								<center>
								<p:messages showDetail="true" rendered="#{vueAffichageResultat.selectionArtiste2NonValide}"/>
								<p:dataTable var="cluster"
									value="#{vueAffichageResultat.lazyModelArtistes2}"
									selection="#{vueAffichageResultat.clusterArtisteNiveau2Choisi}"
									selectionMode="single"
									rendered="#{vueAffichageResultat.etape2artiste}"
									style="width:'#{vueAffichageResultat.largeurDataTables2_3}';"
									paginator="true" 
									rows="10" 
									lazy="true"  
									paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"  
									rowsPerPageTemplate="5,10,15"  
									>
		 		
		 							<f:facet name="header">
										<h:outputLabel style="font-size: 18;">
							 				Trouver un artiste
							 			</h:outputLabel>
									</f:facet>
																
		 							<p:column>
										<f:facet name="header">  
				                  			Name
						          		</f:facet>
										<h:outputText value="#{cluster.nomCluster}" />
									</p:column>
									
									<f:facet name="footer">
										
											<p:commandButton value="Retour"
														image="ui-icon ui-icon-circle-arrow-w" update="monPanel"
														action="#{vueAffichageResultat.retourEtape1}" />
											<p:commandButton value="Trouver"
												image="ui-icon ui-icon-search" update="monPanel"
												action="#{vueAffichageResultat.affinerRechercheArtiste2}" />
										
									</f:facet>
									
		
								</p:dataTable>
								</center>
<!-- etape 2 chanson -->
								<center>
								<p:messages showDetail="true" rendered="#{vueAffichageResultat.selectionChanson2NonValide}"/>
								<p:dataTable var="cluster"
									value="#{vueAffichageResultat.lazyModelChansons2}"
									selection="#{vueAffichageResultat.clusterChansonNiveau2Choisi}"
									selectionMode="single"
									rendered="#{vueAffichageResultat.etape2chanson}"
									style="width:'#{vueAffichageResultat.largeurDataTables2_3}';"
									paginator="true" 
									rows="10" 
									lazy="true"  
									paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"  
									rowsPerPageTemplate="5,10,15"  
									>
									
									<f:facet name="header">
										<h:outputLabel style="font-size: 18;">
											Trouver une chanson
										</h:outputLabel>
									</f:facet>
									
										<p:column>
										<f:facet name="header">  
				                  			Name
						          		</f:facet>
										<h:outputText value="#{cluster.nomCluster}" />
									</p:column>
									
										<f:facet name="footer">
										
											<p:commandButton value="Retour"
														image="ui-icon ui-icon-circle-arrow-w" update="monPanel"
														action="#{vueAffichageResultat.retourEtape1}" />
											<p:commandButton value="Trouver"
												image="ui-icon ui-icon-search" update="monPanel"
												action="#{vueAffichageResultat.affinerRechercheChanson2}" />
										
									</f:facet>
									
								</p:dataTable>
								</center>
<!-- affichage de l'étape 3 -->

<!-- etape 3 album -->
								<center>
								<p:panel 
									style="width:'#{vueAffichageResultat.largeurDataTables2_3}';"
									rendered = "#{!empty vueAffichageResultat.albumChoisi}"
									header ="Quelques informations complémentaires sur #{vueAffichageResultat.albumChoisi.name}">
									
									<h:panelGrid columns="2" columnClasses="column" cellpadding="5">
										<h:outputText value="résumé : "/>  
										<h:outputText value="#{vueAffichageResultat.albumChoisi.wiki.resume}" />  
										<h:outputText value="informations: "/>  
										<h:outputText value="#{vueAffichageResultat.albumChoisi.wiki.contenu}" />  
									</h:panelGrid>
									<p:commandButton value="Afficher les chansons de l'album"
												image="ui-icon ui-icon-search" update="monPanel"
												action="#{vueAffichageResultat.afficherLesChansons}" />
								</p:panel>
								<p:dataTable var="album"
									value="#{vueAffichageResultat.lazyModelAlbums3}"
									rendered="#{vueAffichageResultat.etape3album}"
									style="width:'#{vueAffichageResultat.largeurDataTables2_3}';"
									paginator="true" 
									selectionMode="single" 
									selection="#{vueAffichageResultat.albumChoisi}"
									update="monPanel"
									rows="10" 
									lazy="true"  
									paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"  
									rowsPerPageTemplate="5,10,15"  
									>
									
									<f:facet name="header">
										<h:outputLabel style="font-size: 18;">
							 				Les albums qui répondent à votre recherche
							 			</h:outputLabel>
									</f:facet>
									
									<p:column>
										<f:facet name="header">  
				                  			Name
						          		</f:facet>
										<h:outputText value="#{album.name}" />
									</p:column>
		
									<p:column>
										<f:facet name="header">  
				                  			Artiste
						          		</f:facet>
										<h:outputText value="#{album.artiste.name}" />
									</p:column>
									
									<p:column>
										<f:facet name="header">  
				                  			date
						          		</f:facet>
										<h:outputText value="#{album.date}" />
									</p:column>
									
									<p:column>
										<f:facet name="header">  
				                  			nombre d'auditeurs
						          		</f:facet>
										<h:outputText value="#{album.listeners}" />
									</p:column>
									
									<p:column>
										<f:facet name="header">  
				                  			nombre d'écoutes
						          		</f:facet>
										<h:outputText value="#{album.playcount}" />
									</p:column>
									
									<p:column>
										<f:facet name="header">  
				                  			Lien vers l'album sur last.fm
						          		</f:facet>
						          		<a href="#{album.url}" target="_blank"
						          		style="color:#ab5ddd; margin-right:20px;" ajax="false">
						          			vers last.fm
						          		</a> 
						          		
									</p:column>
									
		
									<p:column>
										<f:facet name="header">  
				                  			Image
						          		</f:facet>
										<p:graphicImage value="#{album.imageLarge}" 
										  alt="image non disponible" />	
									</p:column>
									
									
									<f:facet name="footer">
										<p:commandButton value="Retour"
													image="ui-icon ui-icon-circle-arrow-w" update="monPanel"
													action="#{vueAffichageResultat.retourEtapeAlbum2}" />
									</f:facet>

								</p:dataTable>
								</center>
<!-- etape 3 artiste -->

								<center>
								<p:panel 
									style="width:'#{vueAffichageResultat.largeurDataTables2_3}';"
									rendered = "#{!empty vueAffichageResultat.artisteChoisi}"
									header ="Quelques informations complémentaires sur #{vueAffichageResultat.artisteChoisi.name}">
									
									<h:panelGrid columns="2" columnClasses="column" cellpadding="5">
										<h:outputText value="résumé : "/>  
										<h:outputText value="#{vueAffichageResultat.artisteChoisi.wiki.resume}" />  
										<h:outputText value="informations: "/>  
										<h:outputText value="#{vueAffichageResultat.artisteChoisi.wiki.contenu}" />  
									</h:panelGrid>
								</p:panel>
								<p:dataTable var="artiste"
									value="#{vueAffichageResultat.lazyModelArtistes3}"
									rendered="#{vueAffichageResultat.etape3artiste}"
									style="width:'#{vueAffichageResultat.largeurDataTables2_3}';"
									paginator="true" 
									selection="#{vueAffichageResultat.artisteChoisi}"
									selectionMode="single" 
									update="monPanel"
									rows="10" 
									lazy="true"  
									paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"  
									rowsPerPageTemplate="5,10,15"  
									>
		
									<f:facet name="header">
										<h:outputLabel style="font-size: 18;">
							 				Les artistes qui répondent à votre recherche
							 			</h:outputLabel>
									</f:facet>
											
									<p:column>
										<f:facet name="header">  
				                  			Name
						          		</f:facet>
										<h:outputText value="#{artiste.name}" />
									</p:column>
		
									<p:column>
										<f:facet name="header">  
				                  			nombre d'auditeurs
						          		</f:facet>
										<h:outputText value="#{artiste.listeners}" />
									</p:column>
									
									<p:column>
										<f:facet name="header">  
				                  			nombre d'écoutes
						          		</f:facet>
										<h:outputText value="#{artiste.playcount}" />
									</p:column>
									
									<p:column>
										<f:facet name="header">  
				                  			Lien vers l'artiste sur last.fm
						          		</f:facet>
										<p:commandLink action="#{artiste.url}" 
						          		style="color:#ab5ddd; margin-right:20px;" ajax="false">  
       										<h:outputText value="vers last.fm"/>  
  		 								</p:commandLink>
									</p:column>
									
									
		
									<p:column>
										<f:facet name="header">  
				                  			Image
						          		</f:facet>
										<p:graphicImage value="#{artiste.imageLarge}" 
										 alt="image non disponible" />
									</p:column>
									
									<f:facet name="footer">
										<p:commandButton value="Retour"
													image="ui-icon ui-icon-circle-arrow-w" update="monPanel"
													action="#{vueAffichageResultat.retourEtapeArtiste2}" />
									</f:facet>
									
								</p:dataTable>
								</center>
<!-- etape 3 chanson -->		
								<center>
								<p:panel 
									style="width:'#{vueAffichageResultat.largeurDataTables2_3}';"
									rendered = "#{!empty vueAffichageResultat.chansonChoisie}"
									header ="Quelques informations complémentaires sur #{vueAffichageResultat.chansonChoisie.name}">
									<h:panelGrid columns="2" columnClasses="column" cellpadding="5">
										<h:outputText value="résumé : "/>   
										<h:outputText value="#{vueAffichageResultat.chansonChoisie.wiki.resume}" />  
										<h:outputText value="informations : "/>  
										<h:outputText value="#{vueAffichageResultat.chansonChoisie.wiki.contenu}" />  
									</h:panelGrid>
								</p:panel>

								<p:dataTable var="chanson"
									value="#{vueAffichageResultat.lazyModelChansons3}"
									rendered="#{vueAffichageResultat.etape3chanson}"
									style="width:'#{vueAffichageResultat.largeurDataTables2_3}';"
									paginator="true" 
									selection="#{vueAffichageResultat.chansonChoisie}"
									selectionMode="single" 
									rows="10" 
									lazy="true"  
									paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"  
									rowsPerPageTemplate="5,10,15"  
									update="monPanel"
									>
									
									<f:facet name="header">
										<h:outputLabel style="font-size: 18;">
							 				Les chansons qui répondent à votre recherche
							 			</h:outputLabel>
									</f:facet>
									
									<p:column>
										<f:facet name="header">
											titre
											<h:outputText value="#{chanson.name}" />
										</f:facet>
									</p:column>
									
									<p:column>
										<f:facet name="header">
											duree
											<h:outputText value="#{chanson.duree}" />
										</f:facet>
									</p:column>
									
									
									<p:column>
										<f:facet name="header">
											artiste
											<h:outputText value="#{chanson.artiste.name}" />
										</f:facet>
									</p:column>
									
									
		
									<p:column>
										<f:facet name="header">  
				                  			nombre d'auditeurs
						          		</f:facet>
										<h:outputText value="#{chanson.listeners}" />
									</p:column>
									
									<p:column>
										<f:facet name="header">  
				                  			nombre d'écoutes
						          		</f:facet>
										<h:outputText value="#{chanson.playcount}" />
									</p:column>
									
									<p:column>
										<f:facet name="header">  
				                  			Lien vers la chanson sur last.fm
						          		</f:facet>
										<p:commandLink action="#{chanson.url}" 
						          		style="color:#ab5ddd; margin-right:20px;" ajax="false">  
       										<h:outputText value="vers last.fm"/>  
  		 								</p:commandLink>
									</p:column>
									
									
		
									<p:column>
										<f:facet name="header">  
				                  	Image
						          	</f:facet>
										<p:graphicImage value="#{chanson.imageLarge}" 
										 alt="image non disponible" />
									</p:column>
															
									<f:facet name="footer">
										<p:commandButton value="Retour"
													image="ui-icon ui-icon-circle-arrow-w" update="monPanel"
													action="#{vueAffichageResultat.retourEtapeChanson2}" />
									</f:facet>
								</p:dataTable>
								</center>

								
								
								
								
							
							</p:panel>
						</h:form>
					
					</td>
				</tr>
			</table>
		</p:panel>
	</ui:define>
</ui:composition>
</html>







